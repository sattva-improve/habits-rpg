# SNS投稿用画像生成機能の追加

## 概要
現在のステータス、キャラクターアイコン、カレンダーを1枚の画像にまとめて、SNS（Twitter/X、Instagram等）に投稿できる機能を追加する。

## 背景・目的
- ユーザーが自身の習慣達成状況をSNSでシェアすることで、モチベーションを高める
- 他のユーザーへのアプリ認知度向上
- ゲーミフィケーション要素（レベル、ステータス、ストリーク）を視覚的にアピール

## 機能要件

### 基本機能
- [ ] 現在のステータス情報を含む画像生成
- [ ] キャラクターアイコン（スプライト）の表示
- [ ] カレンダー（習慣達成状況）の表示
- [ ] 画像のダウンロード機能
- [ ] SNSへの直接シェア機能（Web Share API）

### 画像に含める情報
- [ ] キャラクターアバター（現在のスプライト画像）
- [ ] ユーザー名（任意で非表示設定可能）
- [ ] 現在のレベル・経験値
- [ ] 各ステータス値（レーダーチャートまたは数値）
  - たいりょく / かしこさ / せいしん / きようさ / みりょく / ちから
- [ ] 現在のストリーク（連続達成日数）
- [ ] カレンダー表示（月間達成状況）
- [ ] アプリロゴ/ウォーターマーク

### UI/UX
- [ ] シェアボタンをダッシュボードに配置
- [ ] 画像プレビュー機能
- [ ] 複数のテンプレートデザイン選択（オプション）
- [ ] 画像サイズ選択（Twitter用、Instagram用等）

### シェア先
- [ ] 画像ダウンロード（ローカル保存）
- [ ] Twitter/X へのシェア
- [ ] Web Share API対応（モバイル向け）

## 技術的な考慮事項

### 画像生成方法の選定
以下のライブラリを検討:
- **html2canvas** - DOM要素をCanvasに変換（推奨）
- **dom-to-image** - DOMから画像を生成
- **@vercel/og** - OG画像生成（サーバーサイド）
- **Canvas API** - 直接描画

### 実装アプローチ（推奨）
1. シェア用のコンポーネントを作成（非表示でレンダリング）
2. html2canvasでCanvas要素に変換
3. Canvas.toBlob()でBlobを生成
4. ダウンロードまたはWeb Share APIで共有

### レスポンシブ対応
- 出力画像サイズ: 1200x630px（OGP推奨）、1080x1080px（Instagram用）
- 高DPIディスプレイ対応（2x, 3x scale）

### パフォーマンス
- 画像生成は非同期で行い、ローディング状態を表示
- 生成済み画像のキャッシュ（状態変更がない場合）

## デザイン案

```
┌─────────────────────────────────────────────────────┐
│  HABITS RPG                              🔥 15日連続 │
├─────────────────────────────────────────────────────┤
│                                                     │
│   ┌───────┐    勇者  Lv.25                         │
│   │       │    ═══════════════════                 │
│   │ Avatar│    EXP: 2,450 / 3,000                  │
│   │       │                                        │
│   └───────┘    ┌─────────────────┐                 │
│                │   ステータス     │                 │
│                │   レーダーチャート│                 │
│                └─────────────────┘                 │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │        2026年 1月 カレンダー                  │   │
│  │  日  月  火  水  木  金  土                   │   │
│  │  ○  ○  ○  ○  ○  △  ×  ...                │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│              habits-rpg.example.com                 │
└─────────────────────────────────────────────────────┘
```

## 関連ファイル
- `frontend/src/pages/Dashboard.tsx` - シェアボタン配置
- `frontend/src/components/StatsSection.tsx` - ステータス表示
- `frontend/src/components/HabitCalendar.tsx` - カレンダー表示
- `frontend/src/components/common/CharacterImage.tsx` - キャラクター画像

## タスク分解

### Phase 1: 基本実装
1. [ ] html2canvasまたは類似ライブラリの導入
2. [ ] シェア用コンポーネント（ShareableCard）の作成
3. [ ] 画像生成ユーティリティの実装
4. [ ] ダウンロード機能の実装

### Phase 2: UI/UX
5. [ ] シェアボタンコンポーネントの作成
6. [ ] 画像プレビューモーダルの実装
7. [ ] ダッシュボードへの統合

### Phase 3: SNS連携
8. [ ] Web Share API連携
9. [ ] Twitter/Xシェアリンク生成
10. [ ] OGPメタタグ最適化（オプション）

### Phase 4: 拡張
11. [ ] 複数テンプレート対応
12. [ ] 画像サイズ選択機能
13. [ ] カスタマイズオプション（表示項目の選択）

## 依存パッケージ
```json
{
  "html2canvas": "^1.4.1"
}
```

## インストール
```bash
cd frontend && npm install html2canvas
```

## 参考
- [html2canvas](https://html2canvas.hertzen.com/)
- [Web Share API](https://developer.mozilla.org/ja/docs/Web/API/Web_Share_API)
- [Twitter Cards](https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/abouts-cards)

## Labels
- enhancement
- feature-request
