# 007: 習慣のグループカテゴリ機能

## 概要

習慣にユーザー定義のグループカテゴリ機能を追加し、ホーム画面でカテゴリ別にアコーディオンで表示する。

## 背景・理由

- 習慣が増えてきた際に、カテゴリ別に整理して表示したい
- 関連する習慣をグループ化して管理しやすくする
- 画面のスペースを有効活用し、折りたたみ表示で見やすくする

## 要件

### 機能要件

1. **グループカテゴリの追加**
   - 習慣にユーザー定義のグループカテゴリ（文字列）を追加
   - デフォルト値は「未分類」
   - 習慣作成・編集時にカテゴリを入力可能

2. **ホーム画面の表示変更**
   - 習慣をグループカテゴリ別にグループ化
   - 各カテゴリはアコーディオン形式で表示
   - アコーディオンは展開/折りたたみが可能
   - デフォルトは全て展開状態

3. **カテゴリの自動補完**
   - 既存のカテゴリ名を入力候補として表示
   - 新しいカテゴリ名も自由に入力可能

### 非機能要件

- 既存の習慣は「未分類」カテゴリに自動的に分類
- カテゴリは大文字・小文字を区別しない（表示は入力時のまま）

## 変更内容

### データモデル

#### Habit モデルに追加
```typescript
groupCategory: string // デフォルト: '未分類'
```

### 変更するファイル

#### バックエンド
- `amplify/data/resource.ts` - Habitモデルに`groupCategory`フィールドを追加

#### フロントエンド
- `frontend/src/pages/CreateHabit.tsx` - グループカテゴリ入力欄を追加
- `frontend/src/pages/EditHabit.tsx` - グループカテゴリ入力欄を追加
- `frontend/src/components/QuestsSection.tsx` - アコーディオン表示に変更
- `shared/types/index.ts` - Habit型に`groupCategory`を追加

## UI設計

### 習慣作成・編集画面
- 「グループカテゴリ」入力欄を追加
- コンボボックス形式（既存カテゴリの選択 + 新規入力可能）
- プレースホルダー: 「未分類」

### ホーム画面（きょうの習慣セクション）
```
▼ 朝のルーティン (2/3 完了)
  □ 朝のストレッチ
  ✓ 瞑想
  □ 日記を書く

▼ 学習 (1/2 完了)
  ✓ 英語学習
  □ 読書

▼ 未分類 (0/1 完了)
  □ 水を飲む
```

## 技術的詳細

### アコーディオン実装

- shadcn/uiの`Accordion`コンポーネントを使用
- 各カテゴリの完了状況を表示（例: 2/3 完了）
- カテゴリは以下の順序で表示:
  1. アルファベット順（日本語は五十音順）
  2. 「未分類」は常に最後

### マイグレーション

- 既存の習慣は自動的に`groupCategory: '未分類'`が設定される
- DynamoDBのスキーマ更新は不要（フィールド追加のみ）

## テスト項目

- [ ] 習慣作成時にグループカテゴリを設定できる
- [ ] 習慣編集時にグループカテゴリを変更できる
- [ ] ホーム画面でカテゴリ別にグループ化される
- [ ] アコーディオンの展開/折りたたみが動作する
- [ ] 既存の習慣は「未分類」に分類される
- [ ] 既存カテゴリの自動補完が動作する

## 実装優先度

高（ユーザーエクスペリエンス向上に直結）

## 関連Issue

なし
